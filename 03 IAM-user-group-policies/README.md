
# AWS IAM Users, Groups, Policies, and Password Management with Terraform

## Overview
This Terraform configuration automates the creation of IAM users, groups, policies, and password management for an AWS environment. The following tasks are accomplished using this code:

1. **IAM Users**: Creates IAM users based on a list of usernames.
2. **IAM Groups**: Creates an IAM group and attaches users to it.
3. **IAM Policies**: Creates an IAM policy that allows users to change their password.
4. **Password Reset on First Login**: Ensures that users must change their password upon first login.
5. **Password Management**: Generates and assigns passwords to users and outputs them securely.

## Resources Created
- **IAM Users**: Users are created with names from the list provided in the `username` variable.
- **IAM Group**: A group named "developer" is created, and users are added to this group.
- **IAM Policy**: A policy that allows users to change their passwords is created and attached to the IAM group.
- **Login Profiles**: Ensures each user has a login profile with a password reset required upon first login.

## Prerequisites
- AWS account and AWS CLI configured on your local machine.
- Terraform installed (version 0.12 or above).
- Proper IAM permissions to create IAM users, groups, and policies.

## Project Structure
- **`iam_user.tf`**: Defines IAM users, groups, and login profiles.
- **`allow-pass-change.tf`**: Defines the IAM policy allowing users to change their password.
- **`dev-policy.tf`**: Defines the IAM policy attached to the group.
- **`variable.tf`**: Defines variables like `username`, `group_name`, and `policy_name`.
- **`output.tf`**: Defines output for securely displaying generated user passwords.

## Configuration Files
- **`provider.tf`**: The `provider.tf` file configures the `AWS provider` for Terraform, specifying the `AWS region` and optionally the `access credentials` or profile for resource management. 
- **`variable.tf`**: Defines input variables such as `username`, `group_name`, and `policy_name`.
- **`iam_user.tf`**: Creates IAM users, groups, and assigns users to the group.
- **`allow-pass-change.tf`**: Creates a policy allowing password change.
- **`dev-policy.tf`**: Defines a policy attached to the group.
- **`output.tf`**: Displays generated passwords securely.

## Steps to Run the Code

1. **Clone the repository**:
   If the Terraform configuration is stored in a Git repository, you can clone it to your local machine.
   ```bash
   git clone https://github.com/Gaurav1517/Terraform-projects.git
   cd your-repository-folder
   ```

2. **Initialize Terraform**:
   Run the `terraform init` command to initialize your Terraform working directory. This will download the necessary provider plugins.
   ```bash
   terraform init
   ```

3. **Validate the Configuration**:
   Ensure that your Terraform configuration is valid by running the `terraform validate` command.
   ```bash
   terraform validate
   ```

4. **Format the Code**:
   Format the Terraform code to follow the standard code style.
   ```bash
   terraform fmt
   ```

5. **Review the Execution Plan**:
   Before applying any changes, run `terraform plan` to review the actions Terraform will take on your AWS environment.
   ```bash
   terraform plan
   ```

6. **Apply the Configuration**:
   Apply the configuration to create the resources in AWS.
   ```bash
   terraform apply
   ```

7. **Securely View Output**:
   The output will display the IAM user login profiles and passwords, which are marked as sensitive. You can use `terraform output` to view the generated passwords securely:
   ```bash
   terraform output user_passwords
   ```

## IAM User Creation
- The users are created with the usernames specified in the `username` variable.
- The IAM group created is named `developer`, and each user is added to this group.
- A policy that allows users to change their password is attached to the group.

## IAM Group and Policy Attachment
- The users are placed in the `developer` IAM group, and a custom IAM policy is attached to this group, allowing password change (`iam:ChangePassword`).
- A second policy is created to grant permission to describe AWS VPCs and subnets.

## Password Management
- When a user first logs in to the AWS Management Console, they will be required to change their password.
- The `aws_iam_user_login_profile` resource is used to create a login profile for each user, with `password_reset_required = true` ensuring they change their password upon first login.
- The password is automatically generated by Terraform, and you can retrieve the encrypted password as an output.

## Output
The generated passwords are displayed as an output. The output is marked as `sensitive = true` to ensure the passwords are handled securely.


## Important Notes
- Ensure your AWS account has the appropriate permissions to create IAM users, groups, and policies.
- The password policy must meet AWS's account password policy (minimum length, complexity, etc.) when setting up users and login profiles.








 